<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Gæti þurft að include-a hin tvö loan status (PEDNDING og PAID_OFF) -->
    <title th:text="${loan.status.toString() == 'APPROVED'} ? 'Loan Approved' : 'Loan Rejected'">Loan Result</title>
    <link rel="stylesheet" href="/css/main.css">
</head>
<body class="page page--loan-result">
<header class="site-header">
    <nav class="nav">
        <a href="/" class="nav__brand">Team 19 Bank</a>
        <div class="nav__links">
            <a href="/" class="nav__link">Home</a>
            <a href="/transfer" class="nav__link nav__link--active">Transfer</a>
            <form th:action="@{/logout}" method="post" style="display: inline-block;">
                <button type="submit" class="nav__link nav__link--button">Logout</button>
            </form>
        </div>
    </nav>
</header>

<main class="container">
    <section class="card">
        <h1 class="card__title"
            th:text="${loan.status.toString() == 'APPROVED'} ? 'Loan Approved' : 'Loan Rejected'">
            Loan Result
        </h1>

        <div class="details">
            <p><strong>From:</strong> <span th:text="100200300"></span></p>
            <p><strong>To:</strong> <span th:text="${loan.loanReceiverAccount}"></span></p>

            <!-- Using the safest formatDecimal pattern -->
            <p><strong>Amount:</strong> kr <span
                    th:text="${#numbers.formatDecimal(loan.amount, 0, 'POINT', 2, 'POINT')}"></span></p>

            <p th:if="${loan.memo}"><strong>Memo:</strong> <span th:text="${loan.memo}"></span></p>
            <p><strong>Interest Rate:</strong> <span
                    th:text="${loan.interestRate)}"></span></p>

            <!-- Display the reason if the transfer failed -->
            <p class="alert alert--error" th:if="${loan.failureReason != null and loan.failureReason != ''}">
                <strong>Reason:</strong> <span th:text="${loan.failureReason}"></span>
            </p>

        </div>

        <div class="form__actions">
            <a class="btn btn--primary" href="/loan">Make another Loan Request</a>
            <a class="btn btn--ghost" href="/">Back to home</a>
        </div>
    </section>
</main>

<footer class="site-footer">
    <p>&copy; Team 19 Bank</p>
</footer>
